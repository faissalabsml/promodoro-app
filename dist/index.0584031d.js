const t=document.querySelector(".timer__progress--path"),e=t.getTotalLength();t.style.strokeDasharray=e+" "+e,t.style.strokeDashoffset=e,t.getBoundingClientRect(),t.style.transition=t.style.WebkitTransition="stroke-dashoffset 1s ease-in-out";const o=function(o=!0){o||(t.style.strokeDashoffset=e),o&&(t.style.strokeDashoffset=L.currentTimer*e/L[L.currentInterval])},r=document.querySelector(".timer__text > h1"),n=document.querySelector(".work-time"),c=document.querySelector(".next-session"),s=document.querySelector(".control"),a=document.querySelector(".reset");let l;const u=function(){L.currentTimer=60*+r.textContent.split(":")[0]+ +r.textContent.split(":")[1],L.isRunning=!0,l=setInterval(i,1e3)},i=function(){if(L.currentTimer--,L.currentTimer<0)return f(),d(),void o(!1);p(L.currentTimer),o()},d=function(){switch(L.currentInterval){case"promodoro":L.promodoroCount++,L.totalWorkTime+=L.promodoro,L.currentInterval="shortBreak",v(L.totalWorkTime),c.textContent="promodoro";break;case"shortBreak":L.currentInterval="promodoro",c.textContent="short break";break;case"longBreak":L.currentInterval="promodoro",c.textContent="short break",L.promodoroCount=0}"promodoro"===L.currentInterval&&3===L.promodoroCount&&(c.textContent="long break"),4===L.promodoroCount&&(L.currentInterval="longBreak"),localStorage.setItem("state",JSON.stringify(L));const t=document.querySelector(`#${L.currentInterval}`);_(null,t),p(L[L.currentInterval]),u()},m=function(){if("start"==s.textContent||"resume"==s.textContent)return u(),s.textContent="pause",void a.classList.remove("active");"pause"==s.textContent&&(f(),s.textContent="resume",a.classList.add("active"))},f=function(){L.isRunning=!1,clearInterval(l)},p=function(t){let e=Math.floor(t/60),o=t%60;e=e<10?`0${e}`:e,o=o<10?`0${o}`:o,r.textContent=document.title=`${e}:${o}`},v=function(t){let e=Math.floor(t/3600),o=Math.floor(t%3600/60),r=Math.floor(t%3600%60);e=e<10?`0${e}`:e,o=o<10?`0${o}`:o,r=r<10?`0${r}`:r,n.textContent=document.title=`${e}:${o}:${r} ${0==e?"min":1==e?"hour":"hours"}`};s.addEventListener("click",m),document.addEventListener("keydown",(t=>{32===t.keyCode&&m()})),a.addEventListener("click",(function(){const t=document.querySelector("#promodoro");L.isRunning=!1,L.currentInterval="promodoro",L.promodoroCount=0,L.totalWorkTime=0,localStorage.setItem("state",JSON.stringify(L)),a.classList.remove("active"),s.textContent="start",p(L.promodoro),v(L.totalWorkTime),_(null,t),o(!1)}));const y=document.querySelector(".settings-btn"),k=document.querySelector(".close-btn *"),g=document.querySelector(".settings-container"),S=(g.querySelectorAll("input[type='number'], input[type='radio']"),document.querySelectorAll(".form__inputs--arrows > *")),C=function(){g.classList.remove("active")};S.forEach((t=>t.addEventListener("click",(t=>{!function(t){const e=t.target.closest(".form__inputs--arrows").previousElementSibling;"increase"===t.target.closest("svg").dataset.role?e.stepUp():e.stepDown()}(t)})))),S.forEach((t=>t.addEventListener("mousedown",(t=>t.preventDefault()),!1)));y.addEventListener("click",(()=>{g.classList.add("active"),f(),g.querySelector(`input[value='${L.font}']`).checked=!0,g.querySelector(`input[value='${L.accentColor}']`).checked=!0,g.querySelectorAll("input[type='number']").forEach((t=>{t.value=L[t.id]/60}))})),[g,k].forEach((t=>t.addEventListener("click",(t=>{(t.target===g||t.target.closest(".close-btn"))&&("start"!==s.textContent&&(s.textContent="resume",a.classList.add("active")),C())})))),document.addEventListener("keydown",(t=>{27===t.keyCode&&C()}));const h=document.querySelector(".form"),q=document.querySelector(".form__btn"),x=function(){b.style.setProperty("--accent-color",L.colors[L.accentColor]),b.style.setProperty("--font",L.font)},I=function(){h.querySelectorAll("input[type='number'], input[type='radio']:checked").forEach((t=>{const e=t.dataset.change,o=t.value;L[e]="font"===e||"accentColor"===e?o:60*o})),"start"!==s.textContent?(s.textContent="resume",a.classList.add("active")):p(L[L.currentInterval]),x(),C(),localStorage.setItem("state",JSON.stringify(L))};q.addEventListener("click",I),document.addEventListener("keydown",(t=>{13===t.keyCode&&I()}));let L={promodoro:1500,shortBreak:300,longBreak:1200,currentInterval:"promodoro",currentTimer:0,promodoroCount:0,totalWorkTime:0,isRunning:!1,font:"kumbh sans",accentColor:"salmon",colors:{salmon:"#f87272",cyan:"#72f4f8",violet:"#d882f8"}};const E=document.querySelector(`#${L.currentInterval}`),b=document.documentElement;window.addEventListener("load",(function(){const t=localStorage.getItem("state");t&&(L=JSON.parse(t)),L.promodoroCount=0,x(),_(null,E),p(L[L.currentInterval]),v(L.totalWorkTime),document.title="promodoro"}));const $=document.querySelectorAll(".option__label"),T=document.querySelector(".option__background"),_=function(t,e){let o;t?(e=t.target.closest(".option"),o=t.target.previousElementSibling):(o=e,e=e.closest(".option")),o.checked=!0,T.style.left=e.offsetLeft+"px",L.currentInterval=e.querySelector("input").id};$.forEach((t=>t.addEventListener("click",(t=>{_(t),function(t){const e=t.target.getAttribute("for");f(),p(L[e]),s.textContent="start"}(t),o(!1),a.classList.remove("active"),localStorage.setItem("state",JSON.stringify(L))}))));
//# sourceMappingURL=index.0584031d.js.map
